(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"2Fcx":function(e,a,t){e.exports={container:"container___1Rq3A"}},"3T1H":function(e,a,t){"use strict";t.r(a);t("pS3q");var n=t("bdaH"),r=(t("ni22"),t("3GnR")),c=(t("1/+H"),t("hTDs")),o=t("MnxG"),i=t.n(o),l=(t("bM0/"),t("GINK")),s=t("K6Fx"),u=t("lmYr"),m=t("wS/U"),p=(t("1ZwO"),t("RnHJ")),b=t("ZZRV"),d=t.n(b),f=t("9kvl"),h=t("DndG"),g=t("c+yx"),_=(t("IDwa"),t("9h8F")),v=t("KiFe"),E=t("iczh"),O=t.n(E),j=t("uZXw"),y=t("rFY1"),w=t.n(y),C=function(e){var a=e.className,t=Object(f["c"])(),n=function(e){var a=e.key;return Object(f["f"])(a,!1)},r=["zh-CN","zh-TW","en-US","pt-BR"],c={"zh-CN":"\u7b80\u4f53\u4e2d\u6587","zh-TW":"\u7e41\u4f53\u4e2d\u6587","en-US":"English","pt-BR":"Portugu\xeas"},o={"zh-CN":"\ud83c\udde8\ud83c\uddf3","zh-TW":"\ud83c\udded\ud83c\uddf0","en-US":"\ud83c\uddfa\ud83c\uddf8","pt-BR":"\ud83c\udde7\ud83c\uddf7"},i=d.a.createElement(_["a"],{className:w.a.menu,selectedKeys:[t],onClick:n},r.map((function(e){return d.a.createElement(_["a"].Item,{key:e},d.a.createElement("span",{role:"img","aria-label":c[e]},o[e])," ",c[e])})));return d.a.createElement(j["a"],{overlay:i,placement:"bottomRight"},d.a.createElement("span",{className:O()(w.a.dropDown,a)},d.a.createElement(v["a"],{title:"\u8bed\u8a00"})))},N=C,x=t("63rs"),T=(t("nYMg"),t("P7cs")),k=(t("/O3M"),t("2xq1")),S=t("p8cf"),L=t("ZxsM"),I=Object(b["createContext"])({}),P=I,U=(t("Kylo"),t("e9KH")),z=(t("GTEu"),t("Ga1z")),F=(t("S0Nf"),t("r0Wv")),A=t("IqgA"),D=t("irln"),V=t("B1rl"),q=t("vbXO"),K=t("Vw1g"),M=t("ofcj"),G=t("8XT6"),R=t("DdhY"),B=t.n(R),Z={UserName:{props:{size:"large",id:"userName",prefix:d.a.createElement(q["a"],{style:{color:"#1890ff"},className:B.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:d.a.createElement(K["a"],{className:B.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:d.a.createElement(M["a"],{className:B.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:d.a.createElement(G["a"],{className:B.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},H=T["a"].Item,J=function(e){var a=e.onChange,t=e.defaultValue,n=e.customProps,r=void 0===n?{}:n,c=e.rules,o={rules:c||r.rules};return a&&(o.onChange=a),t&&(o.initialValue=t),o},Y=function(e){var a=Object(b["useState"])(e.countDown||0),t=Object(m["a"])(a,2),n=t[0],r=t[1],o=Object(b["useState"])(!1),s=Object(m["a"])(o,2),p=s[0],f=s[1],h=(e.onChange,e.customProps),g=(e.defaultValue,e.rules,e.name),_=(e.getCaptchaButtonText,e.getCaptchaSecondText,e.updateActive,e.type),v=(e.tabUtil,Object(D["a"])(e,["onChange","customProps","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type","tabUtil"])),E=Object(b["useCallback"])(function(){var e=Object(u["a"])(i.a.mark((function e(a){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(x["c"])(a);case 2:if(t=e.sent,!1!==t){e.next=5;break}return e.abrupt("return");case 5:l["a"].success("\u83b7\u53d6\u9a8c\u8bc1\u7801\u6210\u529f\uff01\u9a8c\u8bc1\u7801\u4e3a\uff1a1234"),f(!0);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]);if(Object(b["useEffect"])((function(){var a=0,t=e.countDown;return p&&(a=window.setInterval((function(){r((function(e){return e<=1?(f(!1),clearInterval(a),t||60):e-1}))}),1e3)),function(){return clearInterval(a)}}),[p]),!g)return null;var O=J(e),j=v||{};if("Captcha"===_){var y=Object(V["a"])(j,["onGetCaptcha","countDown"]);return d.a.createElement(H,{shouldUpdate:!0,noStyle:!0},(function(e){var a=e.getFieldValue;return d.a.createElement(U["a"],{gutter:8},d.a.createElement(z["a"],{span:16},d.a.createElement(H,Object(A["a"])({name:g},O),d.a.createElement(F["a"],Object(A["a"])({},h,y)))),d.a.createElement(z["a"],{span:8},d.a.createElement(c["a"],{disabled:p,className:B.a.getCaptcha,size:"large",onClick:function(){var e=a("mobile");E(e)}},p?"".concat(n," \u79d2"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")))}))}return d.a.createElement(H,Object(A["a"])({name:g},O),d.a.createElement(F["a"],Object(A["a"])({},h,j)))},W={};Object.keys(Z).forEach((function(e){var a=Z[e];W[e]=function(t){return d.a.createElement(P.Consumer,null,(function(n){return d.a.createElement(Y,Object(A["a"])({customProps:a.props,rules:a.rules},t,{type:e},n,{updateActive:n.updateActive}))}))}}));var Q=W,X=T["a"].Item,$=function(e){var a=e.className,t=Object(D["a"])(e,["className"]),n=O()(B.a.submit,a);return d.a.createElement(X,null,d.a.createElement(c["a"],Object(A["a"])({size:"large",className:n,type:"primary",htmlType:"submit"},t)))},ee=$,ae=k["a"].TabPane,te=function(){var e=0;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(a).concat(e)}}(),ne=function(e){Object(b["useEffect"])((function(){var a=te("login-tab-"),t=e.tabUtil;t&&t.addTab(a)}),[]);var a=e.children;return d.a.createElement(ae,e,e.active&&a)},re=function(e){return d.a.createElement(P.Consumer,null,(function(a){return d.a.createElement(ne,Object(A["a"])({tabUtil:a.tabUtil},e))}))};re.typeName="LoginTab";var ce=re,oe=function(e){var a=e.className,t=Object(b["useState"])([]),n=Object(m["a"])(t,2),r=n[0],c=n[1],o=Object(b["useState"])({}),i=Object(m["a"])(o,2),l=i[0],s=i[1],u=Object(L["a"])("",{value:e.activeKey,onChange:e.onTabChange}),p=Object(m["a"])(u,2),f=p[0],h=p[1],g=[],_=[];return d.a.Children.forEach(e.children,(function(e){e&&("LoginTab"===e.type.typeName?g.push(e):_.push(e))})),d.a.createElement(P.Provider,{value:{tabUtil:{addTab:function(e){c([].concat(Object(S["a"])(r),[e]))},removeTab:function(e){c(r.filter((function(a){return a!==e})))}},updateActive:function(e){l&&(l[f]?l[f].push(e):l[f]=[e],s(l))}}},d.a.createElement("div",{className:O()(a,B.a.login)},d.a.createElement(T["a"],{form:e.from,onFinish:function(a){e.onSubmit&&e.onSubmit(a)}},r.length?d.a.createElement(d.a.Fragment,null,d.a.createElement(k["a"],{animated:!1,className:B.a.tabs,activeKey:f,onChange:function(e){h(e)}},g),_):e.children)))};oe.Tab=ce,oe.Submit=ee,oe.UserName=Q.UserName,oe.Password=Q.Password,oe.Mobile=Q.Mobile,oe.Captcha=Q.Captcha;var ie=oe,le=t("4iyB"),se=t("f30n"),ue=t("10YL"),me=t("CyIy"),pe=t.n(me),be=t("LneV"),de=t("sBVP"),fe=t("AZo/"),he=ie.Tab,ge=ie.UserName,_e=ie.Password,ve=ie.Submit,Ee=function(e){var a=e.content;return d.a.createElement(p["a"],{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},Oe=function(){var e=new URL(window.location.href),a=Object(g["b"])(),t=a,n=t.redirect;if(n){var r=new URL(n);if(r.origin!==e.origin)return void(window.location.href="/");n=n.substr(e.origin.length),n.match(/^\/.*#/)&&(n=n.substr(n.indexOf("#")+1))}f["d"].replace(n||"/")},je={github:{icon:d.a.createElement(le["a"],null),title:"GitHub"},gitlab:{icon:d.a.createElement(se["a"],null),title:"GitLab"},google:{icon:d.a.createElement(ue["a"],null),title:"Google"},generic_oauth:{icon:d.a.createElement(de["LoginOutlined"],null),title:"Generic OAuth"}},ye=function(e){var a=e.configLoading,t=e.dispatch,o=e.disableLoginForm,p=e.oauth,g=Object(b["useState"])({}),_=Object(m["a"])(g,2),v=_[0],E=_[1],O=Object(b["useState"])(!1),j=Object(m["a"])(O,2),y=j[0],w=j[1],C=Object(f["h"])("@@initialState"),T=C.refresh,k=Object(b["useState"])("account"),S=Object(m["a"])(k,2),L=S[0],I=S[1];Object(b["useEffect"])((function(){t({type:"system/loadSystemConfig"})}),[]);var P=function(){var e=Object(u["a"])(i.a.mark((function e(a){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,a.password=fe(a.password),e.next=5,Object(x["a"])(Object(s["a"])(Object(s["a"])({},a),{},{type:L}));case 5:if(t=e.sent,0!==t.code){e.next=13;break}return l["a"].success("\u767b\u9646\u6210\u529f\uff01"),Oe(),setTimeout((function(){T()}),0),e.abrupt("return");case 13:l["a"].error(t.msg);case 14:E(t),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),l["a"].error("\u767b\u9646\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01");case 20:w(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(a){return e.apply(this,arguments)}}(),U=v.code,z=v.msg,F=d.a.createElement(he,{key:"account",tab:"\u8d26\u6237\u5bc6\u7801\u767b\u5f55"},1===U&&"account"===z&&!y&&d.a.createElement(Ee,{content:"\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef\uff08admin/confgo\uff09"}),d.a.createElement(ge,{name:"userName",placeholder:"\u7528\u6237\u540d: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),d.a.createElement(_e,{name:"password",placeholder:"\u5bc6\u7801: admin",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"}]}),d.a.createElement(ve,{loading:y},"\u767b\u5f55")),A=Object.keys(p).map((function(e){var a=je[e];return d.a.createElement(r["b"].Item,{key:e},d.a.createElement(c["a"],{style:{width:"100%"},onClick:function(){window.open("/api/admin/user/login/".concat(e),"_blank")}},a.icon," ",a.title))})),D=[];o?"3rd_party"!=L&&I("3rd_party"):D.push(F),D.push(d.a.createElement(he,{key:"3rd_party",tab:"\u7b2c\u4e09\u65b9\u8d26\u6237\u767b\u5f55"},A.length>0?d.a.createElement(r["b"],null,A):d.a.createElement("div",{className:pe.a.noOAuthLoginChoices},d.a.createElement(de["ExclamationCircleOutlined"],null)," \u6682\u672a\u914d\u7f6e\u7b2c\u4e09\u65b9\u767b\u5f55")));var V=function(){return a?d.a.createElement("div",{className:pe.a.configLoading},d.a.createElement(n["a"],{tip:"\u7cfb\u7edf\u914d\u7f6e\u52a0\u8f7d\u4e2d..."})):d.a.createElement(ie,{activeKey:L,onTabChange:I,onSubmit:P},D)};return d.a.createElement("div",{className:pe.a.container},d.a.createElement("div",{className:pe.a.lang},d.a.createElement(N,null)),d.a.createElement("div",{className:pe.a.content},d.a.createElement("div",{className:pe.a.top},d.a.createElement("div",{className:pe.a.header},d.a.createElement(h["Link"],{to:"/"},d.a.createElement("span",{className:pe.a.title},"Juno"))),d.a.createElement("div",{className:pe.a.desc},"\u5fae\u670d\u52a1\u6cbb\u7406\u5e73\u53f0")),d.a.createElement("div",{className:pe.a.main},V())))},we=function(e){var a=e.system;return{configLoading:a.configLoading,appUrl:a.appUrl,authProxyEnabled:a.authProxyEnabled,disableLoginForm:a.disableLoginForm,oauth:a.oauth}};a["default"]=Object(be["connect"])(we)(ye)},CyIy:function(e,a,t){e.exports={container:"container___12Qu8",lang:"lang___2ixE3",content:"content___5CWAk",top:"top___ETIlk",header:"header___1Q-qN",logo:"logo___3JC30",title:"title___3ww2k",desc:"desc___3x2Vm",main:"main___2rucS",configLoading:"configLoading___1DcMj",noOAuthLoginChoices:"noOAuthLoginChoices___OtbsH",icon:"icon___5TklJ",other:"other___3tFpJ",register:"register___1VMmz"}},DdhY:function(e,a,t){e.exports={login:"login___LFxDs",getCaptcha:"getCaptcha___9F10t",icon:"icon___2VK3K",other:"other___2F7Be",register:"register___31gTm",prefixIcon:"prefixIcon___dN9_f",submit:"submit___Q43EO"}},rFY1:function(e,a,t){e.exports={menu:"menu___25uep",dropDown:"dropDown___2mKz9"}},uZXw:function(e,a,t){"use strict";t("bM4Q");var n=t("6aMT"),r=t("IqgA"),c=t("irln"),o=t("ZZRV"),i=t.n(o),l=t("iczh"),s=t.n(l),u=t("2Fcx"),m=t.n(u),p=function(e){var a=e.overlayClassName,t=Object(c["a"])(e,["overlayClassName"]);return i.a.createElement(n["a"],Object(r["a"])({overlayClassName:s()(m.a.container,a)},t))};a["a"]=p}}]);